<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>和为s的连续正数序列</title>
</head>
<body>

<script type="text/javascript">
  // 题目链接：https://leetcode-cn.com/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/

  /**
   * @param {number} target
   * @return {number[][]}
   */
  const findContinuousSequence = function (target) {
    let res = []
    // 将小于中位数的连续数字存在这个数组里面，之后将会从这个数组中寻找符合满足条件的数组
    let numArr = []
    for (let j = 1; j < Math.ceil(target / 2); j++) {
      numArr.push(j)
    }

    if (target % 2 === 1) res.push([Math.floor(target / 2), Math.ceil(target / 2)])
    // debugger
    // 连续数字之和恰好为target时的最多数字个数
    let maxLen = addToTarget(target)
    if (maxLen >= 3) {
      for (let i = 2; i <= maxLen; i++) {
        let child = sumSlidingWindow(numArr, i, target)
        res.push(child)
      }
    }
    return res.filter(item => item.length).sort((a, b) => a[0] - b[0])
  };

  // 求1+2+...+n === target时的n值
  function addToTarget(target) {
    for (let i = 1; i < target; i++) {
      let sum = sumNums(i)
      if (sum > target) return i - 1
      else if (sum === target) return i
    }
  }

  // 求1+2+...+n的和
  const sumNums = function (n) {
    return n && (n + sumNums(n - 1))
  };

  // 求滑动窗口滑动时其内所有元素的和，判断其和是否为target，若是，则返回滑动窗口内的元素；
  const sumSlidingWindow = function (nums, k, target) {
    if (nums.length === 0) return 0
    else if (nums.length === 1) return nums[0]
    if (!k) return 0
    let start = 0
    let end = k
    let res = []
    for (let i = 0; i < nums.length; i++) {
      if (start <= nums.length - k) {
        end = start + k
        let arr = nums.slice(start, end)
        if (sumArr(arr) === target) return arr
        start++
      } else {
        return res
      }
    }
    return res
  };

  // 求数组内所有元素的和
  function sumArr(nums) {
    let sum = 0
    for (let i =0; i < nums.length; i++) {
      sum += nums[i]
    }
    return sum
  }
  const target = 98160
  console.log(findContinuousSequence(target))

</script>
</body>
</html>
