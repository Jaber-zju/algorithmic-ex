<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>分发糖果</title>
</head>
<body>

<script type="text/javascript">
  // 题目链接：https://leetcode-cn.com/problems/candy/


  /**
   * @param {number[]} ratings
   * @return {number}
   */
  var candy = function (ratings) {
    // 局部最优解
    let len = ratings.length
    let arr = new Array(len).fill(0)

    // 第1轮左规则从左到右遍历：比左边的小朋友分数高就多发一颗糖果
    for (let i = 1; i < len; i++) {
      if (ratings[i] > ratings[i - 1]) {
        arr[i] = arr[i - 1] + 1
      }
    }
    for (let j = len - 2; j >= 0; j--) {
      // 第2轮右规则从右到左遍历 + 过滤第1轮是否糖果已经比右邻多了，多了则已经满足条件不处理即可。
      if (ratings[j] > ratings[j + 1] && arr[j] <= arr[j + 1]) {
        arr[j] = arr[j + 1] + 1
      }
    }

    return arr.reduce((a, b) => {
      return a + b
    }, 0) + len // 加上基础值每个人都为1
  }

  const ratings = [1, 2, 2]
  console.log(candy(ratings))
</script>
</body>
</html>
