<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>单词规律</title>
</head>
<body>

<script type="text/javascript">
  // https://leetcode-cn.com/problems/word-pattern/

  /**
   * @param {string} pattern
   * @param {string} str
   * @return {boolean}
   */
    // 方法一：借助第三方数组
  var wordPattern = function (pattern, str) {
      if (!str) return false
      let mid = []
      // debugger
      let arr = str.split(' ')
      let s = pattern.split('')
      if (arr.filter((item, index, arr) => arr.indexOf(item) === index).length !== s.filter((item, index, arr) => arr.indexOf(item) === index).length) return false
      for (let i = 0; i < pattern.length; i++) {
        let letter = pattern[i]
        if (pattern.indexOf(letter) === i) {
          mid[i] = arr[i]
        } else {
          let index = pattern.indexOf(letter)
          mid[i] = arr[index]
        }
      }
      for (let i = 0; i < arr.length; i++) {
        if (arr[i] !== mid[i]) return false
      }
      return true
    }


  // 方法二：计算两个传入参数中各个部分的index，如果不同则返回false
  /**
   * @param {string} pattern
   * @param {string} str
   * @return {boolean}
   */
  var wordPattern = function (pattern, str) {
    var arr = str.split(' ')
    if (pattern.length !== arr.length) return false
    for (var i = 0; i < pattern.length; i++) {
      if (pattern.indexOf(pattern[i]) !== arr.indexOf(arr[i])) {
        return false
      }
    }
    return true
  }


  // 方法三：哈希map
  /**
   * @param {string} pattern
   * @param {string} str
   * @return {boolean}
   */
  var wordPattern = function (pattern, str) {
    var arr = str.split(' ');
    var map = new Map();
    var maps = new Map();
    if (pattern.length !== arr.length) return false;
    for (var i = 0; i < pattern.length; i++) {

      if (maps.has(arr[i]) === false) {
        maps.set(arr[i], pattern[i]);
      } else {
        if (maps.get(arr[i]) !== pattern[i]) {
          return false
        }
      }
      if (map.has(pattern[i]) === false) {
        map.set(pattern[i], arr[i]);
      } else {
        if (map.get(pattern[i]) !== arr[i]) {
          return false
        }
      }

    }
    return true;
  }


  const pattern = 'abba'
  const str = "dog cat cat dog"
  console.log(wordPattern(pattern, str))
</script>
</body>
</html>
